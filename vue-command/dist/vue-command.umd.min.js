(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vue-command"]=e(require("vue")):t["vue-command"]=e(t["Vue"])})("undefined"!==typeof self?self:this,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"0857":function(t,e,n){},"188a":function(t,e,n){},"3c30":function(t,e,n){"use strict";n("188a")},4795:function(t,e,n){t.exports=n("96cf")},"677c":function(t,e,n){"use strict";n("0857")},"6b0d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n}},"6ebd":function(t,e){const n=[],r=/$|[!-@[-`{-~][\s\S]*/g,o=Array.isArray,i=function(t){if(""===t)return"";if("false"===t)return!1;const e=+t;return 0*e===0?e:t},c=function(t){let e,n,r,i={};for(let c in t){r=t[c],e=i[c]=o(r)?r:[r];for(let t=0;t<e.length;t++){n=i[e[t]]=[c];for(let r=0;r<e.length;r++)t!==r&&n.push(e[r])}}return i},s=function(t,e){let r,o,i={};for(let c in e)if(r=t[c],o=e[c],i[c]=o,void 0===r)t[c]=n;else for(let t=0;t<r.length;t++)i[r[t]]=o;return i},u=function(t,e,r){let o,i,c={};if(void 0!==e)for(let s=0;s<e.length;s++)if(o=e[s],i=t[o],c[o]=r,void 0===i)t[o]=n;else for(let t=0,e=i.length;t<e;t++)c[i[t]]=r;return c},a=function(t,e,n,r,i){let c,s=r[e],u=void 0===s?-1:s.length;if(u>=0||void 0===i||i(e)){c=t[e],void 0===c?t[e]=n:o(c)?c.push(n):t[e]=[c,n];for(let n=0;n<u;n++)t[s[n]]=t[e]}};t.exports=function(t,e){let n,o,l,f,h,d=(e=e||{}).unknown,p=c(e.alias),m=u(p,e.string,""),y=s(p,e.default),v=u(p,e.boolean,!1),b=e.stopEarly,g=[],w={_:g};for(let c=0,s=t.length;c<s;c++)if(o=t[c],"-"!==o[0]||"-"===o)if(b)while(c<s)g.push(t[c++]);else g.push(o);else if("--"===o)while(++c<s)g.push(t[c]);else if("-"===o[1])l=o.indexOf("=",2),"n"===o[2]&&"o"===o[3]&&"-"===o[4]?(n=o.slice(5,l>=0?l:void 0),h=!1):l>=0?(n=o.slice(2,l),h=void 0!==v[n]||(void 0===m[n]?i(o.slice(l+1)):o.slice(l+1))):(n=o.slice(2),h=void 0!==v[n]||(s===c+1||"-"===t[c+1][0]?void 0===m[n]||"":void 0===m[n]?i(t[++c]):t[++c])),a(w,n,h,p,d);else{r.lastIndex=2,f=r.exec(o),l=f.index,h=f[0];for(let e=1;e<l;e++)a(w,n=o[e],e+1<l?void 0===m[n]||o.substring(e+1,e=l)+h:""===h?s===c+1||"-"===t[c+1][0]?void 0===m[n]||"":void 0!==v[n]||(void 0===m[n]?i(t[++c]):t[++c]):void 0!==v[n]||(void 0===m[n]?i(h):h),p,d)}for(let r in y)void 0===w[r]&&(w[r]=y[r]);for(let r in v)void 0===w[r]&&(w[r]=!1);for(let r in m)void 0===w[r]&&(w[r]="");return w}},8875:function(t,e,n){var r,o,i;(function(n,c){o=[],r=c,i="function"===typeof r?r.apply(e,o):r,void 0===i||(t.exports=i)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(d){var n,r,o,i=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,c=/@([^@]*):(\d+):(\d+)\s*$/gi,s=i.exec(d.stack)||c.exec(d.stack),u=s&&s[1]||!1,a=s&&s[2]||!1,l=document.location.href.replace(document.location.hash,""),f=document.getElementsByTagName("script");u===l&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(a-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=n.replace(r,"$1").trim());for(var h=0;h<f.length;h++){if("interactive"===f[h].readyState)return f[h];if(f[h].src===u)return f[h];if(u===l&&f[h].innerHTML&&f[h].innerHTML.trim()===o)return f[h]}return null}}return t}))},"88f8":function(t,e,n){"use strict";n("cb8e")},"8bbf":function(e,n){e.exports=t},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),c=new k(r||[]);return i._invoke=S(t,n,c),i}function a(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",d="completed",p={};function m(){}function y(){}function v(){}var b={};b[i]=function(){return this};var g=Object.getPrototypeOf,w=g&&g(g(L([])));w&&w!==n&&r.call(w,i)&&(b=w);var x=v.prototype=m.prototype=Object.create(b);function O(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function j(t,e){function n(o,i,c,s){var u=a(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)}var o;function i(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}this._invoke=i}function S(t,e,n){var r=l;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return $()}n.method=o,n.arg=i;while(1){var c=n.delegate;if(c){var s=P(c,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=a(t,e,n);if("normal"===u.type){if(r=n.done?d:f,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}function P(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=a(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function L(t){if(t){var n=t[i];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,c=function n(){while(++o<t.length)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}return{next:$}}function $(){return{value:e,done:!0}}return y.prototype=x.constructor=v,v.constructor=y,v[s]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},O(j.prototype),j.prototype[c]=function(){return this},t.AsyncIterator=j,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var c=new j(u(e,n,r,o),i);return t.isGeneratorFunction(n)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},O(x),x[s]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=L,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var u=r.call(c,"catchLoc"),a=r.call(c,"finallyLoc");if(u&&a){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},bdf8:function(t,e,n){"use strict";n("eb52")},cb8e:function(t,e,n){},eb52:function(t,e,n){},fb15:function(t,e,n){"use strict";if(n.r(e),n.d(e,"createStdout",(function(){return Lt})),n.d(e,"createStderr",(function(){return $t})),n.d(e,"createDummyStdout",(function(){return Tt})),n.d(e,"EVENT_LISTENERS",(function(){return Bt})),"undefined"!==typeof window){var r=window.document.currentScript,o=n("8875");r=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var i=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(n.p=i[1])}var c=n("4795"),s=n.n(c),u=n("8bbf"),a={ref:"vue-command",class:"vue-command"},l={key:0,class:"term-bar"},f={key:0,class:"term-title"},h={ref:"term-std",class:"term-std"},d={key:0};function p(t,e,n,r,o,i){var c=this,s=Object(u["resolveComponent"])("search"),p=Object(u["resolveComponent"])("stdout"),m=Object(u["resolveComponent"])("stdin");return Object(u["openBlock"])(),Object(u["createElementBlock"])("div",a,[Object(u["renderSlot"])(t.$slots,"bar",{},(function(){return[n.hideBar?Object(u["createCommentVNode"])("",!0):(Object(u["openBlock"])(),Object(u["createElementBlock"])("div",l,[n.hideTitle?Object(u["createCommentVNode"])("",!0):(Object(u["openBlock"])(),Object(u["createElementBlock"])("span",f,Object(u["toDisplayString"])(n.title),1))]))]})),Object(u["createElementVNode"])("div",h,[t.isSearch?(Object(u["openBlock"])(),Object(u["createBlock"])(s,{key:0,ref:"search","is-search":t.isSearch,"onUpdate:is-search":e[0]||(e[0]=function(e){return t.isSearch=e}),bus:this.bus,executed:t.local.executed,stdin:n.stdin,onClick:i.focus,onHandle:t.handle},null,8,["is-search","bus","executed","stdin","onClick","onHandle"])):Object(u["createCommentVNode"])("",!0),Object(u["withDirectives"])(Object(u["createElementVNode"])("div",{ref:"term-cont",class:Object(u["normalizeClass"])([{"term-cont-fullscreen":t.local.isFullscreen},"term-cont"]),onClick:e[2]||(e[2]=function(){return i.focus&&i.focus.apply(i,arguments)})},[n.showIntro?(Object(u["openBlock"])(),Object(u["createElementBlock"])("div",d,Object(u["toDisplayString"])(n.intro),1)):Object(u["createCommentVNode"])("",!0),(Object(u["openBlock"])(!0),Object(u["createElementBlock"])(u["Fragment"],null,Object(u["renderList"])(t.local.history,(function(r,o){return Object(u["openBlock"])(),Object(u["createElementBlock"])("div",{key:o,class:Object(u["normalizeClass"])(["term-hist",{"term-hist-fullscreen":t.local.isFullscreen&&o===t.local.history.length-1}])},[Object(u["withDirectives"])(Object(u["createVNode"])(p,{component:r,class:"term-stdout"},null,8,["component"]),[[u["vShow"],!t.local.isFullscreen||o===t.local.history.length-1]]),Object(u["withDirectives"])(Object(u["createVNode"])(m,{ref:"stdin"+o,stdin:t.local.stdin,"onUpdate:stdin":e[1]||(e[1]=function(e){return t.local.stdin=e}),bus:c.bus,cursor:t.local.cursor,"hide-prompt":n.hidePrompt,"is-fullscreen":t.local.isFullscreen,"is-in-progress":t.local.isInProgress,"is-last":o===t.local.history.length-1,prompt:n.prompt,"help-text":n.helpText,"help-timeout":n.helpTimeout,"show-help":n.showHelp,uid:t._uid,onHandle:t.handle},{prompt:Object(u["withCtx"])((function(){return[Object(u["renderSlot"])(t.$slots,"prompt")]})),_:2},1032,["stdin","bus","cursor","hide-prompt","is-fullscreen","is-in-progress","is-last","prompt","help-text","help-timeout","show-help","uid","onHandle"]),[[u["vShow"],0===o&&!t.local.isFullscreen||!(o===t.local.history.length-1&&t.local.isInProgress)&&!t.local.isFullscreen]])],2)})),128))],2),[[u["vShow"],!t.isSearch]])],512)],512)}var m={class:"term-search-container"},y={class:"term-search"},v=Object(u["createTextVNode"])(" (reverse-i-search)`");function b(t,e,n,r,o,i){return Object(u["openBlock"])(),Object(u["createElementBlock"])("div",{ref:"term-cont",class:"term-cont term-cont-fullscreen",onKeydown:[e[2]||(e[2]=Object(u["withKeys"])(Object(u["withModifiers"])((function(t){return i.setIsSearch(!1)}),["exact","prevent"]),["tab"])),e[3]||(e[3]=Object(u["withKeys"])(Object(u["withModifiers"])((function(t){return i.setIsSearch(!1)}),["exact","prevent"]),["esc"])),e[4]||(e[4]=Object(u["withKeys"])(Object(u["withModifiers"])((function(){return i.sigint&&i.sigint.apply(i,arguments)}),["ctrl","exact","prevent"]),["67"]))]},[Object(u["createElementVNode"])("div",m,[Object(u["createElementVNode"])("span",y,[v,Object(u["withDirectives"])(Object(u["createElementVNode"])("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.search=e}),autofocus:"",type:"text",autocorrect:"off",autocapitalize:"none",onKeyup:e[1]||(e[1]=Object(u["withKeys"])(Object(u["withModifiers"])((function(){return i.handle&&i.handle.apply(i,arguments)}),["exact"]),["enter"]))},null,544),[[u["vModelText"],t.search]]),Object(u["createTextVNode"])("': "+Object(u["toDisplayString"])(t.command),1)])])],544)}var g={inject:["setStdin"],props:{bus:{required:!0,type:Object},executed:{required:!0,type:Set},isSearch:{required:!0,type:Boolean},stdin:{required:!0,type:String}},emits:["update:isSearch"],data:function(){return{command:"",search:""}},watch:{search:function(){var t=this;this.executed.forEach((function(e){e.startsWith(t.search)&&(t.command=e,t.setStdin(e))}))}},created:function(){this.command=this.stdin},mounted:function(){function t(){this.style.width="".concat(this.value.length,"ch")}this.focus();var e=this.$refs.input;e.addEventListener("input",t),t.call(e)},methods:{handle:function(){this.$emit("update:isSearch",!1),this.$emit("handle",this.command)},focus:function(){this.$refs.input.focus()},setIsSearch:function(t){this.$emit("update:isSearch",t)},sigint:function(){this.setStdin(""),this.$emit("update:isSearch",!1)}}},w=(n("677c"),n("6b0d")),x=n.n(w);const O=x()(g,[["render",b]]);var j=O,S={class:"term-stdin-container"},P={key:0,class:"term-ps"},I={class:"term-stdin"},E=["autofocus","disabled","placeholder"];function k(t,e,n,r,o,i){return Object(u["openBlock"])(),Object(u["createElementBlock"])("div",S,[Object(u["renderSlot"])(t.$slots,"prompt",{},(function(){return[n.hidePrompt?Object(u["createCommentVNode"])("",!0):(Object(u["openBlock"])(),Object(u["createElementBlock"])("span",P,Object(u["toDisplayString"])(t.local.prompt),1))]})),Object(u["createElementVNode"])("span",I,[Object(u["withDirectives"])(Object(u["createElementVNode"])("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.local.stdin=e}),autofocus:n.isLast,disabled:!n.isLast||n.isInProgress,placeholder:t.placeholder,type:"text",autocorrect:"off",autocapitalize:"none",onClick:e[1]||(e[1]=function(e){return i.setCursor(t.$refs.input.selectionStart)}),onKeyup:[e[2]||(e[2]=function(e){return i.setCursor(t.$refs.input.selectionStart)}),e[3]||(e[3]=Object(u["withKeys"])(Object(u["withModifiers"])((function(){return i.handle&&i.handle.apply(i,arguments)}),["exact"]),["enter"]))]},null,40,E),[[u["vModelText"],t.local.stdin]])])])}function L(t,e,n,r,o,i,c){try{var s=t[i](c),u=s.value}catch(a){return void n(a)}s.done?e(u):Promise.resolve(u).then(r,o)}function $(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){L(i,r,o,c,s,"next",t)}function s(t){L(i,r,o,c,s,"throw",t)}c(void 0)}))}}var T={inject:["setCursor","setStdin"],props:{bus:{required:!0,type:Object},cursor:{default:0,required:!0,type:Number},helpText:{default:"",type:String},helpTimeout:{default:0,type:Number},hidePrompt:{default:!1,type:Boolean},isInProgress:{default:!1,required:!0,type:Boolean},isLast:{default:!1,required:!0,type:Boolean},isFullscreen:{default:!1,required:!0,type:Boolean},prompt:{default:"",type:String},showHelp:{default:!1,type:Boolean},stdin:{default:"",required:!0,type:String},uid:{required:!0,type:Number}},emits:["update:stdin"],data:function(){return{placeholder:"",local:{prompt:"",stdin:""}}},watch:{cursor:function(){this.isLast&&this.$refs.input.setSelectionRange(this.cursor,this.cursor)},isInProgress:function(){var t=this;return $(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isInProgress||!t.isLast){e.next=5;break}return e.next=3,Object(u["nextTick"])();case 3:t.scrollIntoView(),t.focus();case 5:case"end":return e.stop()}}),e)})))()},isLast:function(t,e){e&&!t&&this.blur()},stdin:function(){var t=this;return $(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLast&&!t.isInProgress&&(t.local.stdin=t.stdin),e.next=3,Object(u["nextTick"])();case 3:t.setCursor(t.$refs.input.selectionStart);case 4:case"end":return e.stop()}}),e)})))()},"local.stdin":function(){this.$emit("update:stdin",this.local.stdin),this.setCursor(this.$refs.input.selectionStart)},helpText:function(){this.isLast&&this.showHelp&&this.setPlaceholder(this.helpText)}},created:function(){this.local.prompt=this.prompt,this.local.stdin=this.stdin},mounted:function(){var t=this;this.scrollIntoView(),this.focus(),setTimeout((function(){t.isLast&&t.showHelp&&t.setPlaceholder(t.helpText)}),this.helpTimeout)},methods:{handle:function(){this.setPrompt(this.prompt),this.$emit("handle",this.local.stdin),this.setPlaceholder("")},setPlaceholder:function(t){this.placeholder=t},setPrompt:function(t){this.local.prompt=t},blur:function(){this.$refs.input.blur()},focus:function(){this.$refs.input.focus()},scrollIntoView:function(){this.$refs.input.scrollIntoView()}}};n("bdf8");const B=x()(T,[["render",k]]);var F=B;function C(t,e,n,r,o,i){return Object(u["openBlock"])(),Object(u["createBlock"])(Object(u["resolveDynamicComponent"])(n.component))}var N={props:{component:{required:!0,type:Object}}};n("3c30");const A=x()(N,[["render",C]]);var _=A,H={provide:function(){return{setCursor:this.setCursor}},data:function(){return{local:{cursor:0}}},emits:["update:cursor"],watch:{cursor:function(){this.local.cursor=this.cursor},"local.cursor":function(){this.$emit("update:cursor",this.local.cursor)}},methods:{autocomplete:function(){"function"===typeof this.autocompletionResolver&&this.autocompletionResolver()},setCursor:function(t){this.local.cursor=t}}},V=n("6ebd"),D=n.n(V);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K(t){return W(t)||U(t)||G(t)||R()}function R(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function G(t,e){if(t){if("string"===typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}function U(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function W(t){if(Array.isArray(t))return Y(t)}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J(t,e,n,r,o,i,c){try{var s=t[i](c),u=s.value}catch(a){return void n(a)}s.done?e(u):Promise.resolve(u).then(r,o)}function Q(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){J(i,r,o,c,s,"next",t)}function s(t){J(i,r,o,c,s,"throw",t)}c(void 0)}))}}var X=function(t){var e=[],n=[],r=/[^\s"]+|"([^"]*)"/gi;do{n=r.exec(t),null!=n&&e.push(n[1]?n[1]:n[0])}while(null!=n);var o=[],i=!1;return e.forEach((function(t,n){i?i=!1:t.endsWith("=")?(o.push(t+e[n+1]),i=!0):o.push(t)})),o},Z={provide:function(){return{terminate:this.terminate}},emits:["update:executed","update:history"],methods:{handle:function(t){var e=this;return Q(s.a.mark((function n(){var r;return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.trim().split(" ")[0],"function"!==typeof e.commands[r]){n.next=5;break}return n.next=4,Promise.resolve(e.execute(t));case 4:return n.abrupt("return");case 5:if("function"!==typeof e.builtIn){n.next=9;break}return n.next=8,Promise.resolve(e.builtIn(t,e));case 8:return n.abrupt("return");case 9:e.commandNotFound(t);case 10:case"end":return n.stop()}}),n)})))()},execute:function(t){var e=this;return Q(s.a.mark((function n(){var r,o,i,c,u,a;return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=t.trim(),r=D()(t.split(" "),e.parserOptions)._[0],o=Tt(),i=X(t),c=D()(i,e.parserOptions),n.next=7,Promise.resolve(e.commands[r](c));case 7:o=n.sent,o=e.setupComponent(o,e.local.history.length,c),""!==t&&(u=new Set(e.local.executed),u.delete(t),u.add(t),e.$emit("update:executed",u),e.setExecuted(u)),e.setPointer(e.local.executed.size),a=K(e.local.history),a.push(o),e.emitExecute(),e.setIsInProgress(!0),e.setHistory(a),e.$emit("update:history",K(a));case 17:case"end":return n.stop()}}),n)})))()},commandNotFound:function(t){var e=Tt();if(""!==t){e=$t("".concat(t,": ").concat(this.notFound),!0),e=this.setupComponent(e,this.local.history.length);var n=new Set(this.local.executed);n.delete(t),n.add(t),this.$emit("update:executed",n),this.setExecuted(n),this.setPointer(this.local.executed.size)}var r=K(this.local.history);r.push(e),this.emitExecute(),this.setIsInProgress(!0),this.setHistory(r),this.$emit("update:history",K(r))},setupComponent:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=q({},t),hasOwnProperty.call(t,"computed")||(t.computed={});var o=this.local.cursor,i=new Set(this.local.executed),c=K(this.local.history),s=this.local.pointer,u=this.local.stdin;return t.computed=q({environment:function(){return{isExecuting:e.local.isInProgress&&e.local.history.length-1===n,isFullscreen:e.local.isFullscreen,isInProgress:e.local.isInProgress}},context:function(){return{cursor:o,executed:i,history:c,parsed:r,pointer:s,stdin:u}}},t.computed),t},terminate:function(){this.setStdin(""),this.setIsFullscreen(!1),this.$emit("executed"),this.setIsInProgress(!1)}}};function tt(t){return ot(t)||rt(t)||nt(t)||et()}function et(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nt(t,e){if(t){if("string"===typeof t)return it(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(t,e):void 0}}function rt(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function ot(t){if(Array.isArray(t))return it(t)}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ct={provide:function(){return{setPointer:this.setPointer}},data:function(){return{local:{executed:new Set,history:[],pointer:0}}},watch:{history:{handler:function(){this.setHistory(tt(this.history))},deep:!0},"local.pointer":function(){this.bus.emit("update:pointer",this.local.pointer)},pointer:function(){this.setPointer(this.pointer)}},methods:{increaseHistory:function(){void 0!==this.local.executed&&this.local.pointer<this.local.executed.size-1&&(this.local.pointer++,this.local.stdin=tt(this.local.executed)[this.local.pointer])},decreaseHistory:function(){this.local.pointer>0&&(this.local.pointer--,this.local.stdin=tt(this.local.executed)[this.local.pointer])},setExecuted:function(t){this.local.executed=t},setHistory:function(t){this.local.history=t},setPointer:function(t){this.local.pointer=t}}};function st(t,e,n,r,o,i,c){try{var s=t[i](c),u=s.value}catch(a){return void n(a)}s.done?e(u):Promise.resolve(u).then(r,o)}function ut(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){st(i,r,o,c,s,"next",t)}function s(t){st(i,r,o,c,s,"throw",t)}c(void 0)}))}}var at={data:function(){return{isSearch:!1}},watch:{isSearch:function(){var t=this;return ut(s.a.mark((function e(){var n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isSearch){e.next=5;break}return e.next=3,Object(u["nextTick"])();case 3:n=t.$refs["stdin".concat(t.local.history.length-1)],n.focus();case 5:case"end":return e.stop()}}),e)})))()}},methods:{setIsSearchHandler:function(){this.isInProgress||this.setIsSearch(!0)},setIsSearch:function(t){this.isSearch=t}}},lt={provide:function(){return{setIsFullscreen:this.setIsFullscreen,setIsInProgress:this.setIsInProgress}},data:function(){return{local:{isFullscreen:!1,isInProgress:!1}}},emits:["update:isFullscreen","update:isInProgress"],watch:{isFullscreen:function(){this.setIsFullscreen(this.isFullscreen)},isInProgress:function(){this.setIsInProgress(this.isInProgress)},"local.isFullscreen":function(){this.$emit("update:isFullscreen",this.local.isFullscreen)},"local.isInProgress":function(){this.$emit("update:isInProgress",this.local.isInProgress)}},methods:{setIsFullscreen:function(t){this.local.isFullscreen=t},setIsInProgress:function(t){this.local.isInProgress=t}}},ft=function(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map((function(t){t(n)})),(r=t.get("*"))&&r.slice().map((function(t){t(e,n)}))}}};function ht(t){return yt(t)||mt(t)||pt(t)||dt()}function dt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pt(t,e){if(t){if("string"===typeof t)return vt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(t,e):void 0}}function mt(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function yt(t){if(Array.isArray(t))return vt(t)}function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bt(t,e,n,r,o,i,c){try{var s=t[i](c),u=s.value}catch(a){return void n(a)}s.done?e(u):Promise.resolve(u).then(r,o)}function gt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){bt(i,r,o,c,s,"next",t)}function s(t){bt(i,r,o,c,s,"throw",t)}c(void 0)}))}}var wt={emits:["update:cursor","update:history","update:stdin","execute","executed","input"],components:{Search:j,Stdin:F,Stdout:_},mixins:[H,Z,ct,at,lt],provide:function(){return{emitExecute:this.emitExecute,emitExecuted:this.emitExecuted,emitInput:this.emitInput,setStdin:this.setStdin}},props:{autocompletionResolver:{default:void 0,type:Function},builtIn:{default:void 0,type:Function},commands:{default:function(){return{}},type:Object},cursor:{default:0,type:Number},eventListeners:{default:function(){return[Bt.autocomplete,Bt.history,Bt.search]},type:Array},executed:{default:function(){return new Set},type:Set},helpTimeout:{default:4e3,type:Number},hideBar:{default:!1,type:Boolean},hidePrompt:{default:!1,type:Boolean},hideTitle:{default:!1,type:Boolean},helpText:{default:"Type help",type:String},history:{default:function(){return[]},type:Array},intro:{default:"Fasten your seatbelts!",type:String},isFullscreen:{default:!1,type:Boolean},isInProgress:{default:!1,type:Boolean},notFound:{default:"command not found",type:String},parserOptions:{default:function(){return{}},type:Object},pointer:{default:0,type:Number},prompt:{default:"~neil@moon:#/",type:String},showHelp:{default:!1,type:Boolean},showIntro:{default:!1,type:Boolean},stdin:{default:"",type:String},title:{default:"neil@moon: ~",type:String}},data:function(){return{bus:ft(),local:{stdin:""},scroll:{eventListener:void 0,isBottom:!0,resizeObserver:void 0}}},watch:{stdin:function(){this.setStdin(this.stdin)},"local.stdin":function(){this.$emit("input",this.local.stdin),this.$emit("update:stdin",this.local.stdin),""===this.local.stdin&&this.setPointer(this.local.executed.size)}},mounted:function(){var t=this;this.scroll.resizeObserver=new ResizeObserver(function(){var e=gt(s.a.mark((function e(n){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:t.scroll.isBottom&&(t.$refs["term-std"].scrollTop=t.$refs["term-std"].scrollHeight);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.scroll.resizeObserver.observe(this.$refs["term-cont"]),this.scroll.eventListener=function(){var e=t.$refs["term-std"];t.scroll.isBottom=e.scrollHeight-e.scrollTop-e.clientHeight===0},this.$refs["term-std"].addEventListener("scroll",this.scroll.eventListener),this.eventListeners.forEach((function(e){return e(t)}))},created:function(){this.executed.add=function(){for(var t,e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(t=this.local.executed).add.apply(t,r),(e=Object.getPrototypeOf(this).add).call.apply(e,[this].concat(r))},this.executed.clear=function(){this.local.executed.clear(),Object.getPrototypeOf(this).add.call(this)},this.executed.delete=function(){for(var t,e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(t=this.local.executed).delete.apply(t,r),(e=Object.getPrototypeOf(this).delete).call.apply(e,[this].concat(r))},this.setCursor(this.cursor),this.setPointer(this.pointer),this.setStdin(this.stdin),this.setIsInProgress(this.isInProgress),this.setIsFullscreen(this.isFullscreen);var t=ht(this.history);0===t.length&&(t.push(Tt()),this.$emit("update:history",ht(t))),this.setHistory(ht(t))},methods:{emitInput:function(t){this.$emit("input",t)},emitExecute:function(){this.$emit("execute")},emitExecuted:function(){this.$emit("executed")},focus:function(){if(""===window.getSelection().toString())if(this.isSearch)this.$refs.search.focus();else{var t=this.$refs["stdin".concat(this.local.history.length-1)];t.focus()}},setStdin:function(t){this.local.stdin=t}}};n("88f8");const xt=x()(wt,[["render",p]]);var Ot=xt,jt=38,St=40,Pt=82,It=9;function Et(t,e,n,r,o,i,c){try{var s=t[i](c),u=s.value}catch(a){return void n(a)}s.done?e(u):Promise.resolve(u).then(r,o)}function kt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){Et(i,r,o,c,s,"next",t)}function s(t){Et(i,r,o,c,s,"throw",t)}c(void 0)}))}}var Lt=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"VueCommandStdout",o=arguments.length,i=new Array(o>4?o-4:0),c=4;c<o;c++)i[c-4]=arguments[c];return{name:r,mixins:i,inject:["terminate"],mounted:function(){var t=this;return kt(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["nextTick"])();case 2:t.terminate();case 3:case"end":return e.stop()}}),e)})))()},render:function(){return n?Object(u["h"])("span",{},t):e?Object(u["h"])("span",{innerText:t}):Object(u["h"])("span",{innerHTML:t})}}},$t=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"VueCommandStderr",o=arguments.length,i=new Array(o>4?o-4:0),c=4;c<o;c++)i[c-4]=arguments[c];return{name:r,mixins:i,inject:["terminate"],mounted:function(){var t=this;return kt(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["nextTick"])();case 2:t.terminate();case 3:case"end":return e.stop()}}),e)})))()},render:function(){return n?Object(u["h"])("span",{},t):e?Object(u["h"])("span",{innerText:t}):Object(u["h"])("span",{innerHTML:t})}}},Tt=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"VueCommandDummyStdout",e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return{name:t,mixins:n,inject:["terminate"],mounted:function(){var t=this;return kt(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["nextTick"])();case 2:t.terminate();case 3:case"end":return e.stop()}}),e)})))()},render:function(){return Object(u["h"])("span",{},"")}}},Bt={autocomplete:function(t){t.$refs["term-cont"].addEventListener("keydown",(function(e){e.keyCode!==It||t.local.isInProgress||(e.preventDefault(),t.autocomplete())}))},history:function(t){t.$refs["term-cont"].addEventListener("keydown",(function(e){t.local.isInProgress||(e.keyCode===jt&&(e.preventDefault(),t.decreaseHistory()),e.keyCode===St&&(e.preventDefault(),t.increaseHistory()))}))},search:function(t){t.$refs["term-cont"].addEventListener("keydown",(function(e){e.ctrlKey&&e.keyCode===Pt&&!t.local.isInProgress&&(e.preventDefault(),t.setIsSearchHandler())}))}},Ft=Ot;e["default"]=Ft}})}));
//# sourceMappingURL=vue-command.umd.min.js.map